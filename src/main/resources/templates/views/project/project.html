<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/menu.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/project.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/style.css}" type="text/css">
    <title>New project</title>
</head>
<body>
<div th:include="/fragments/userMenuFragments :: header"/>

<div class="container">

    <div class="leftMenu">
        <div class="leftMenuItem active" data-section="general">General information</div>
        <div class="leftMenuItem" data-section="applicant">Applicant</div>
        <div class="leftMenuItem" data-section="partners">Partners</div>
        <div class="leftMenuItem" data-section="sustainability">Sustainability</div>
        <div class="leftMenuItem" data-section="inidcators">Indicators</div>
        <div class="leftMenuItem" data-section="timetable">Timetable</div>
        <div class="leftMenuItem" data-section="budget">Financial information</div>
        <div class="leftMenuItem" data-section="consents">Consents</div>
        <div class="leftMenuItemWithButton">
            <p>
                <button class="button" type="submit" form="projectForm">Save</button>
            </p>
            <p>
                <a th:href="@{/menu}">
                    <button class="button">Back</button>
                </a>
            </p>
        </div>

    </div>
    <div class="mainView">
        <div class="mainInside">
            <form th:action="@{/project/save}" method="post" th:object="${project}" id="projectForm">
                <div th:include="/fragments/sections/general :: general" class="section" id="general"></div>
                <div th:include="/fragments/sections/applicant :: applicant" class="section hidden"
                     id="applicant"></div>
                <div th:include="/fragments/sections/partners :: partners" class="section hidden" id="partners"></div>
                <div th:include="/fragments/sections/sustainability :: sustainability" class="section hidden"
                     id="sustainability"></div>
                <div th:include="/fragments/sections/indicators :: indicators" class="section hidden"
                     id="inidcators"></div>


                <div class="section hidden" id="timetable">
                    <h3>6 Timetable</h3>
                    <input type="number" th:field="*{timetable.id}" hidden/>

                    <div th:each="task, stat : *{timetable.tasks}" class="taskDiv">
                        <h3>Task no <span th:text="${stat.count}"></span></h3>
                        <input type="number" th:field="*{timetable.tasks[__${stat.index}__].id}" hidden>
                        <button class="button removeTaskButton">Remove</button>
                        <p>Task name</p>
                        <label>
                        <input type="text" th:field="*{timetable.tasks[__${stat.index}__].name}">
                        </label>
                        <p>Task description</p>
                        <label>
                            <textarea th:field="*{timetable.tasks[__${stat.index}__].description}" th:text="*{timetable.tasks[__${stat.index}__].description}" cols="100" rows="4"></textarea>
                        </label>
                        <p>Start date</p>
                        <label>
                            <input type="date" th:field="*{timetable.tasks[__${stat.index}__].taskStart}">
                        </label>
                        <p>End date</p>
                        <label>
                            <input type="date" th:field="*{timetable.tasks[__${stat.index}__].taskEnd}">
                        </label>
                    </div>

                    <div th:fragment="partners" id="addTaskButton">
                        <button class="button">Add task</button>
                    </div>


                </div>


                <div class="section hidden" id="budget">
                    <input type="number" th:field="*{budget.id}" hidden/>
                    test budget</div>
                <div th:include="/fragments/sections/consents :: consents" class="section hidden" id="consents"></div>
            </form>
        </div>
    </div>

</div>

<div th:include="/fragments/userMenuFragments :: footer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script th:src="@{/js/projectView.js}"></script>
</body>
</html>