<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/menu.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/project.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/style.css}" type="text/css">
    <title>New project</title>
</head>
<body>
<div th:include="/fragments/userMenuFragments :: header"/>

<div class="container">

    <div class="leftMenu">
        <div class="leftMenuItem active" data-section="general">General information</div>
        <div class="leftMenuItem" data-section="applicant">Applicant</div>
        <div class="leftMenuItem" data-section="partners">Partners</div>
        <div class="leftMenuItem" data-section="sustainability">Sustainability</div>
        <div class="leftMenuItem" data-section="inidcators">Indicators</div>
        <div class="leftMenuItem" data-section="timetable">Timetable</div>
        <div class="leftMenuItem" data-section="budget">Financial information</div>
        <div class="leftMenuItem" data-section="consents">Consents</div>
        <div class="leftMenuItemWithButton">
            <p>
                <button class="button" type="submit" form="projectForm">Save</button>
            </p>
            <!--            <p>-->
            <!--                <button class="button">Submit</button>-->
            <!--            </p>-->
            <p>
                <a th:href="@{/menu}">
                    <button class="button">Back</button>
                </a>
            </p>
        </div>

    </div>
    <div class="mainView">
        <div class="mainInside">
            <form th:action="@{/project/save}" method="post" th:object="${project}" id="projectForm">
                <div th:include="/fragments/sections/general :: general" class="section" id="general"></div>
                <div th:include="/fragments/sections/applicant :: applicant" class="section hidden"
                     id="applicant"></div>


                <div class="section hidden" id="partners">

                    <h2>4.1. Partners</h2>
                    <div th:each="partner, stat : *{applicant.partners}" class="partner">
                        <input type="text" th:field="*{applicant.partners[__${stat.index}__].id}" hidden/>
                        <label>
                            <h3>3.1.1. Partner name</h3>
                            <textarea th:field="*{applicant.partners[__${stat.index}__].name}" cols="100" rows="5"></textarea>

                        </label>
                        <label>
                            <h3>3.1.2. Legal form</h3>
                            <textarea th:field="*{applicant.partners[__${stat.index}__].legalForm}" cols="100" rows="5"></textarea>
                        </label>
                        <label>
                            <h3>3.1.3. Registration number</h3>
                            <input type="text" th:field="*{applicant.partners[__${stat.index}__].registationNumber}"/>
                        </label>
                        <label>
                            <h3>3.1.4. VAT number</h3>
                            <input type="text" th:field="*{applicant.partners[__${stat.index}__].VATNumber}"/>
                        </label>
                        <label>
                            <h3>3.1.5. Bank account number</h3>
                            <input type="number" th:field="*{applicant.partners[__${stat.index}__].bankAccountNumber}"/>
                        </label>
                        <h3>3.1.6. Contact details</h3>
                        <label>
                            <p>Email:</p>
                            <input type="email" th:field="*{applicant.partners[__${stat.index}__].email}"/>
                        </label>
                        <label>
                            <p>Phone number:</p>
                            <input type="number" th:field="*{applicant.partners[__${stat.index}__].phone}"/>
                        </label>
                        <label>
                            <p>Country:</p>
                            <input type="text" th:field="*{applicant.partners[__${stat.index}__].country}"/>
                        </label>
                        <label>
                            <p>Post code:</p>
                            <input type="text" th:field="*{applicant.partners[__${stat.index}__].postCode}"/>
                        </label>
                        <label>
                            <p>Address:</p>
                            <input type="text" th:field="*{applicant.partners[__${stat.index}__].addressLine1}"/>
                        </label>
                        <label>
                            <br>
                            <input type="text" th:field="*{applicant.partners[__${stat.index}__].addressLine2}"/>
                        </label>
                    </div>
                    <div th:fragment="partners" id="addPartnerButton">
                        <button class="button">Add partner</button>
                    </div>


                </div>


                <div th:include="/fragments/sections/sustainability :: sustainability" class="section hidden"
                     id="sustainability"></div>
                <!--                <div th:include="/fragments/sections/indicators :: indicators" class="section hidden" id="inidcators"></div>-->
                <div class="section hidden" id="inidcators">

                    <h3>5.1. Incdicators</h3>
                    <table>
                        <tr>
                            <th>Id</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Type</th>
                            <th>Value</th>
                            <th>Year of expected achievment</th>
                        </tr>
                        <label th:for="*{projectDetails.indicators}">
                            <tr th:each="indicator, index : ${indicators}">
                                <td th:text="${indicator.id}"></td>
                                <td th:text="${indicator.name}"></td>
                                <td th:text="${indicator.description}"></td>
                                <td th:text="${indicator.indicatorType.display()}"></td>
                                <label th:for="${indicator}">
                                    <td>
                                        <input type="number" th:id="indicator.value"
                                               th:name="${project.projectDetails.indicators}"
                                               th:value="${indicator.value}"/>
                                        <input type="number" th:id="indicator.id"
                                               th:name="${project.projectDetails.indicators}" th:value="${indicator.id}"
                                               hidden/>

                                    </td>
                                    <td>
                                        <input type="number" th:id="indicator.plannedchievement"
                                               th:name="${project.projectDetails.indicators}"
                                               th:value="${indicator.plannedchievement}"/>

                                    </td>
                                </label>

                            </tr>
                        </label>

                    </table>
                </div>


                <div class="section hidden" id="timetable">test timetable</div>
                <div class="section hidden" id="budget">test budget</div>
                <div th:include="/fragments/sections/consents :: consents" class="section hidden" id="consents"></div>
            </form>
        </div>
    </div>

</div>

<div th:include="/fragments/userMenuFragments :: footer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script th:src="@{/js/projectView.js}"></script>
</body>
</html>